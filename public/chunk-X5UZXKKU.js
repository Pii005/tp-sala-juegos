import{A as u,B as k,C as D,E as N,G as I,H as F,L as T,O as W,U as R,W as A,X as L,Y as v,a as x,aa as V,b as C,ba as B,c as M,e as y,ea as q,f as l,ga as G,ha as z,i as c,j as m,ja as $,k as j,l as w,la as H,m as n,ma as Q,n as i,o as s,pa as J,qa as K,r as p,ra as U,s as _,t as r,u as f,v as O,w as S,x as E,y as P}from"./chunk-VR3QZDNK.js";var d=class a{constructor(e){this.firestore=e;this.chatCollection=v(this.firestore,"chat")}chatCollection;enviarMensaje(e){let t=v(this.firestore,"chat");return L(t,e)}obtenerMensajes(){let e=B(this.chatCollection,V("fechaEnvio","asc"));return A(e)}static \u0275fac=function(t){return new(t||a)(y(R))};static \u0275prov=M({token:a,factory:a.\u0275fac,providedIn:"root"})};function te(a,e){if(a&1&&(n(0,"div",7)(1,"strong"),r(2),i(),r(3),s(4,"br"),n(5,"span",8),r(6),u(7,"date"),i()()),a&2){let t=e.$implicit,o=_();c(2),f(t.email),c(),O(": ",t.mensaje," "),c(3),f(D(7,3,o.convertirTimestampAFecha(t.fechaEnvio),"short"))}}var g=class a{constructor(e){this.chatService=e}nuevoMensaje="";email="";mensajes$=C([]);ngOnInit(){this.email=localStorage.getItem("userEmail")||"",this.mensajes$=this.chatService.obtenerMensajes()}enviarMensaje(){return x(this,null,function*(){if(this.email){if(this.nuevoMensaje.trim()){let e={email:this.email,mensaje:this.nuevoMensaje,fechaEnvio:W.fromDate(new Date)};try{yield this.chatService.enviarMensaje(e),console.log("mensaje guardado: "+this.nuevoMensaje+" ENVIADO POR: "+this.email),this.nuevoMensaje=""}catch(t){console.error("Error al enviar el mensaje:",t)}}}else console.log("No esta registrado el usuario")})}convertirTimestampAFecha(e){return e?e.toDate():null}static \u0275fac=function(t){return new(t||a)(m(d))};static \u0275cmp=l({type:a,selectors:[["app-chat-window"]],decls:9,vars:4,consts:[[1,"chat-window"],[1,"chat-messages"],["class","message",4,"ngFor","ngForOf"],[3,"ngSubmit"],[1,"input-group","mb-3"],["type","text","placeholder","Escribe tu mensaje...","name","mensaje","minlength","1","maxlength","50","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"message"],[1,"fecha"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1),j(2,te,8,6,"div",2),u(3,"async"),i(),n(4,"form",3),p("ngSubmit",function(){return o.enviarMensaje()}),n(5,"div",4)(6,"input",5),P("ngModelChange",function(h){return E(o.nuevoMensaje,h)||(o.nuevoMensaje=h),h}),i(),n(7,"button",6),r(8,"Enviar"),i()()()()),t&2&&(c(2),w("ngForOf",k(3,2,o.mensajes$)),c(4),S("ngModel",o.nuevoMensaje))},dependencies:[N,Q,q,G,z,J,K,U,H,$,I,F],styles:[".chat-window[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;max-width:600px;max-height:800px;margin:20px auto;display:flex;flex-direction:column}.chat-messages[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;margin-bottom:20px;background-color:#f9f9f9}.mensaje[_ngcontent-%COMP%]{margin-bottom:20px;padding:5px;border-radius:5px;background-color:#f1f1f1}.fecha[_ngcontent-%COMP%]{font-size:.8em;color:#888}.input-message[_ngcontent-%COMP%]{display:flex;justify-content:space-between}input[_ngcontent-%COMP%]{flex:1;padding:10px;border-radius:5px;border:1px solid #ccc;margin-right:10px}button[_ngcontent-%COMP%]{padding:10px 15px;border-radius:5px;border:none;background-color:#007bff;color:#fff;cursor:pointer}"]})};var Y=class a{constructor(e){this.router=e}goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||a)(m(T))};static \u0275cmp=l({type:a,selectors:[["app-chat"]],decls:18,vars:0,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-body-tertiary","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/logoGame.png","alt","Logo mando","width","30","height","24"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",3,"click"],["role","search",1,"d-flex","ms-auto","nav-item"],[1,"content-with-bg"],[1,"chat-container"],[1,"chat-box"]],template:function(t,o){t&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),s(3,"img",3),i(),n(4,"a",2),r(5,"P1 Games"),i(),n(6,"button",4),s(7,"span",5),i(),n(8,"div",6)(9,"ul",7)(10,"li",8)(11,"a",9),p("click",function(){return o.goTo("home")}),r(12,"Home"),i()()(),s(13,"div",10),i()()(),n(14,"div",11)(15,"div",12)(16,"div",13),s(17,"app-chat-window"),i()()())},dependencies:[g],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow:hidden;height:100%}.content-with-bg[_ngcontent-%COMP%]{background-image:url(/assets/home.jpeg);background-size:cover;background-position:center;background-repeat:no-repeat;min-height:100vh;display:flex;flex-direction:column;justify-content:center;padding:20px 0}.chat-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.chat-box[_ngcontent-%COMP%]{width:60%;height:80vh;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;padding:20px;overflow-y:auto}"]})};export{Y as a};
